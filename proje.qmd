---
title: "TÜRKİYE'DEKİ İKİNCİ EL ARAÇ İLANLARI ÜZERİNE VERİ ANALİZİ"
number-sections: true
code-fold: true
---

![](images/484681339013201.gif)

**Proje sayfamıza hoş geldiniz.**

*Projemizle ilgili güncellemelerden haberdar olmak için bu alanı takip edin.*

# Proje Genel Bakış ve Kapsamı

Bu çalışma, 2025 yılı Türkiye ikinci el otomobil pazarı verilerini kullanarak marka ve şehir bazlı benchmark analizi, kapsamlı keşifsel veri analizi (EDA) ve fiyat tahminlemesi (forecasting) gerçekleştirmeyi amaçlamaktadır. Kod, anlatı ve görseller Quarto ile tekrar üretilebilir biçimde hazırlanmıştır.

# Veri Seti Hakkında Bilgi

Bu projede kullanılan veri seti, Türkiye’deki popüler bir çevrimiçi araç ilan platformundan 2025 yılında web kazıma yoluyla elde edilmiş kapsamlı ikinci el otomobil ilan verilerini içermektedir \[1\]. Veri setinde farklı marka ve modellerdeki araçların; üretim yılı, kilometre bilgisi, satış fiyatı, yakıt tipi (benzin, dizel, LPG, hibrit, elektrik), vites tipi (manuel, otomatik), bulunduğu şehir (il) ve benzeri özellikleri kayıt altına alınmıştır. Toplamda on binlerce ilana ait verinin yer aldığı bu veri seti, Türkiye ikinci el otomobil piyasasının güncel durumunu yansıtacak şekilde zengin ve çeşitli bir örneklem sunmaktadır. Analiz için veri Kaggle üzerinden temin edilip (bahridgr, 2025), uygun biçimde temizlenerek R programlama diline aktarılmıştır. Veri ön işleme aşamasında eksik ya da tutarsız gözlemler elenmiş, kategorik değişkenler analiz amaçlarına uygun olarak yeniden düzenlenmiştir. Örneğin, araç yaşı üretim yılından hesaplanmış, fiyatlar gerekli durumlarda aşırı uç değerlerin etkisini azaltmak için logaritmik dönüşümle incelenmiştir.

Veri analizi ve görselleştirme işlemleri **R** dili kullanılarak ve **Quarto** ile tekrarlanabilir bir raporlama formatında yürütülmüştür \[2\]. Veri manipülasyonu ve grafik çizimleri için geniş ölçüde **tidyverse** paket ailesinden yararlanılmıştır \[3\]. Özellikle **dplyr** ve **readr** ile veri işlemleri gerçekleştirilirken, görselleştirmeler için **ggplot2** kullanılmıştır \[4\]. Coğrafi analizlerde Türkiye’nin il sınırları verisini işlemek ve harita çizimleri yapmak amacıyla **sf** paketi tercih edilmiştir \[5\]. Ayrıca, modelleme ve doğrulama aşamalarında **caret** paketi kullanılarak farklı makine öğrenmesi algoritmalarının uygulanması ve karşılaştırılması sağlanmıştır; bu kapsamda özellikle **randomForest** paketinden faydalanılmıştır \[6,7\]. Tüm bu araçlar ve yöntemler, çalışmanın şeffaf ve yeniden üretilebilir olmasını temin etmektedir.\
\
\[1\] bahridgr. (2025). *Used Car Prices in Türkiye 2025 (EN/TR)* \[Data set\]. Kaggle.\
<https://www.kaggle.com/datasets/bahridgr/used-car-prices-in-trkiye-2025-entr>

\[2\] R Core Team. (2023). *R: A language and environment for statistical computing* (Version 4.x) \[Computer software\]. R Foundation for Statistical Computing.\
<https://www.R-project.org/>

\[3\] Wickham, H., Averick, M., Bryan, J., Chang, W., McGowan, L. D., François, R., … Yutani, H. (2019). Welcome to the **tidyverse**. *Journal of Open Source Software, 4*(43), 1686.\
<https://doi.org/10.21105/joss.01686>

\[4\] Wickham, H. (2016). *ggplot2: Elegant graphics for data analysis*. Springer.\
<https://doi.org/10.1007/978-3-319-24277-4>

\[5\] Pebesma, E. (2018). Simple features for R: Standardized support for spatial vector data. *The R Journal, 10*(1), 439–446.\
<https://doi.org/10.32614/RJ-2018-009>

\[6\] Kuhn, M. (2008). Building predictive models in R using the **caret** package. *Journal of Statistical Software, 28*(5), 1–26.\
<https://doi.org/10.18637/jss.v028.i05>

\[7\] Liaw, A., & Wiener, M. (2002). Classification and regression by **randomForest**. *R News, 2*(3), 18–22.\
<https://CRAN.R-project.org/doc/Rnews/>

## Veri Hakkında Genel Bilgiler

Veri seti CSV formatında olup yaklaşık 6.672 araç ilanına ilişkin kayıtlar ve 26 değişken barındırmaktadır. Her bir kayıt, araç ilan başlığı, il-ilçe bilgisi, fiyat, ilan tarihi, araç markası, seri ve modeli, üretim yılı, kilometre, vites tipi (manuel, otomatik vb.), yakıt türü (benzin, dizel, hibrit, elektrikli, LPG), kasa tipi (sedan, hatchback, SUV vb.), renk, motor hacmi (cc), motor gücü (HP), çekiş türü (önden, arkadan, 4x4), boya-değişen durumu, takas imkanı, satıcı türü (galeri veya bireysel), araç vergisi ve kaza geçmişi gibi kapsamlı özellikleri içermektedir. Ayrıca veri setinde, ham metin şeklindeki bazı alanların (ör. fiyat ve kilometre) temizlenmiş ve sayısal hale getirilmiş versiyonları (`Price_Clean`, `Mileage_Clean` vb.) de yer almaktadır.\
\
Veri setindeki ilan tarihlerine bakıldığında 30 Aralık 2024 ile 17 Nisan 2025 arasındaki dönemi kapsadığı görülmektedir.

## Tercih Sebebi

-Türkiye merkezli gerçek dünya verisi olması

-Araç pazarı ile ilgili güçlü içgörüler barındırması

-Fiyat tahminlemesi gibi uygulamalara uygun olması

-Zengin sayısal ve kategorik değişkenlere sahip olması sayesinde istatistiksel analiz ve görselleştirmeye uygun olması

## Veri Ön İşleme

### Kütüphanelerin Yüklenmesi

```{r output=FALSE}
library(tidyverse)     # dplyr, ggplot2, readr, tidyr, stringr, purrr, forcats
library(janitor)       # Sütun isimlerini temizleme
library(naniar)        # Eksik değer görselleştirme
library(scales)        # Etiket biçimlendirme (label_number vs.)
library(lubridate)     # Tarih işleme
library(caret)         # Modelleme ve veri bölme
library(randomForest)  # Rastgele orman modeli
library(vip)           # Değişken önem grafikleri
library(sf)            # Shapefile okuma ve coğrafi veri
library(leaflet)       # İnteraktif harita
library(TRmaps)        # Türkiye il haritası
library(stringi)       # Türkçe karakter dönüştürme için

```

### Veri Okuma ve Temizlik

```{r message=FALSE, warning=FALSE }


# Veriyi oku
cars <- read_csv("csv/Cars.csv") %>% clean_names()

# Tüm karakter sütunlarında \n, \r, \t, _x000D_ gibi ifadeleri temizle
clean_text_columns <- function(df) {
  df %>%
    mutate(across(where(is.character), ~ gsub("\\n|\\r|\\t|_x000D_", " ", .))) %>%
    mutate(across(where(is.character), ~ str_trim(.)))
}

# Temizleme fonksiyonunu uygula
cars <- clean_text_columns(cars)

# Silinecek sütunlar
drop_list <- c("listing_title", "listing_id")

# Sütunları çıkar ve tekrarlayan satırları sil
cars <- cars %>%
  select(-all_of(drop_list)) %>%
  distinct()

# Araç yaşı hesapla
cars <- cars %>%
  mutate(
    year_clean = as.numeric(year),
    age = 2025 - year_clean
  )

# car_data'nın ilk 10 satırını tablo olarak bastır
knitr::kable(head(cars, 10), caption = "Hazırlanan Veri Setinin İlk 10 Satırı")


```

### Eksik Verilerin Doldurulması

```{r output=FALSE}

# Mod hesaplama fonksiyonu
mode_impute <- function(x) {
  ux <- na.omit(x)
  ux[which.max(tabulate(match(x, ux)))]
}

# Sayısal sütunları medyanla doldur
cars <- cars %>%
  mutate(
    mileage_clean = ifelse(is.na(mileage_clean), median(mileage_clean, na.rm = TRUE), mileage_clean),
    engine_power_clean = ifelse(is.na(engine_power_clean), median(engine_power_clean, na.rm = TRUE), engine_power_clean),
    year_clean = ifelse(is.na(year_clean), median(year_clean, na.rm = TRUE), year_clean)
  )

# Kategorik sütunları mod ile doldur
categorical_cols <- c("fuel_type", "transmission_type", "seller_type", "accident_history", "color", "drive_train", "body_type")
for (col in categorical_cols) {
  cars[[col]][is.na(cars[[col]])] <- mode_impute(cars[[col]])
}

# Sayıları karakter içinden ayıkla ve sayıya çevir
cars <- cars %>%
  mutate(
    engine_power_hp = str_extract(engine_power_hp, "\\d+") %>% as.numeric(),
    engine_size_clean = str_extract(engine_size_clean, "\\d+") %>% as.numeric(),
    engine_size_cc = parse_number(as.character(engine_size_cc))
  )

# engine_power_hp ve engine_size sütunlarını marka-model bazlı doldur
cars <- cars %>%
  group_by(brand, model) %>%
  mutate(
    engine_power_hp = ifelse(is.na(engine_power_hp), round(mean(engine_power_hp, na.rm = TRUE)), engine_power_hp),
    engine_size_clean = ifelse(is.na(engine_size_clean), round(mean(engine_size_clean, na.rm = TRUE)), engine_size_clean),
    engine_size_cc = ifelse(is.na(engine_size_cc), round(mean(engine_size_cc, na.rm = TRUE)), engine_size_cc)
  ) %>%
  ungroup()

# Kalan NA’lar için genel medyanla doldurma
cars <- cars %>%
  mutate(
    engine_power_hp = ifelse(is.na(engine_power_hp), median(engine_power_hp, na.rm = TRUE), engine_power_hp),
    engine_size_clean = ifelse(is.na(engine_size_clean), median(engine_size_clean, na.rm = TRUE), engine_size_clean),
    engine_size_cc = ifelse(is.na(engine_size_cc), median(engine_size_cc, na.rm = TRUE), engine_size_cc)
  )

# Eksik year varsa marka-model ortalaması ile doldur
cars <- cars %>%
  group_by(brand, model) %>%
  mutate(year = ifelse(is.na(year), round(mean(year, na.rm = TRUE)), year)) %>%
  ungroup()

# Araç yaşını yeniden güncelle
cars <- cars %>%
  mutate(age = 2025 - year)

# Kullanılmayan sütunları kaldır
cars <- cars %>%
  select(-any_of(c("vehicle_tax_try", "trade_in_available")))

# Kritik alanlarda eksik varsa o satırları sil
cars <- cars %>%
  filter(!is.na(year), !is.na(model), !is.na(age))

# Eksik değerleri görselleştir
gg_miss_var(cars)

```

```{r output=FALSE}

cars %>%
  summarise(across(everything(), ~ sum(is.na(.)))) %>%
  pivot_longer(cols = everything(), names_to = "değişken", values_to = "eksik_sayı") %>%
  filter(eksik_sayı > 0) %>%
  arrange(desc(eksik_sayı))

```

# Analiz

Veri hazırlandıktan sonra, proje kapsamında çeşitli analiz adımları gerçekleştirilmiştir. İlk olarak **Keşifsel Veri Analizi (Exploratory Data Analysis - EDA)** ile verinin genel özellikleri ve önemli paternleri incelenmiştir. EDA kapsamında, ortalama fiyatların marka bazında dağılımı, farklı vites ve yakıt tiplerinde fiyat farklılıkları, şehirler bazında bölgesel fiyat değişimleri gibi sorular görselleştirmelerle ele alınmıştır. Ardından **Trend Analizi** başlığı altında, zaman boyutunda (piyasa eğilimleri ve araç yaşı etkisi gibi) fiyat değişimleri değerlendirilmiştir. Sonraki adımda, **Model Uyarlama** bölümünde ikinci el araç fiyatlarını öngörmeye yönelik istatistiksel bir model kurulmuş; bu model ile verideki ilişkilerin nicel olarak ifade edilmesi ve yeni gözlemler için fiyat tahminlerinin elde edilmesi amaçlanmıştır. Modelin başarı durumu **Modelin Performansı** kısmında ölçütlerle tartışılmıştır. Son olarak, **Sonuçlar** kısmında analiz bulguları özetlenmiş ve genel çıkarımlar sunulmuştur. Aşağıda, bu analiz adımlarının detayları sırasıyla ele alınmaktadır.

## Keşifsel Veri Analizi

```{r }
cars %>%
  summarise(
    mean_price = mean(price_clean, na.rm = TRUE),
    mean_km = mean(mileage_clean, na.rm = TRUE),
    mean_hp = mean(engine_power_clean, na.rm = TRUE)
  )
```

Bu da demektir ki veri setindeki ikinci el araçların ortalama:

Fiyatı yaklaşık 787.000 TL

Kilometresi 217.000 km

Motor gücü 108 HP

### Marka Bazlı Ortalama Fiyat Dağılımı

```{r, message=FALSE, warning=FALSE}
# Marka bazlı ortalama fiyat ve ilan sayısı
brand_summary <- cars %>%
  group_by(brand) %>%
  summarise(
    mean_price = mean(price_clean, na.rm = TRUE),
    count = n()
  ) %>%
  filter(count > 30) %>%  # Çok az gözleme sahip markaları filtrele (isteğe bağlı)
  arrange(desc(mean_price))

# Görselleştirme

ggplot(brand_summary, aes(x = reorder(brand, mean_price), y = mean_price, fill = mean_price)) +
  geom_col() +
  geom_text(aes(label = paste0(format(round(mean_price, 0), big.mark = "."), " TL")),
            hjust = 1.1, color = "white", size = 3.5) +  # hjust < 1 → dışta, > 1 → içte
  coord_flip() +
  scale_fill_gradient(low = "lightblue", high = "darkblue", guide = "none") +
  scale_y_continuous(
    limits = c(0, NA),
    labels = label_number(suffix = " TL", big.mark = ".", decimal.mark = ",")
  ) +
  labs(
    title = "Markalara Göre Ortalama Araç Fiyatları",
    x = "Marka",
    y = "Ortalama Fiyat (TL)"
  ) +
  theme_minimal(base_size = 14)




```

Markalara Göre Ortalama Araç Fiyatları

Veri setindeki her bir aracın markasına göre ortalama ikinci el satış fiyatı hesaplanarak markalar bazında bir karşılaştırma yapılmıştır. Elde edilen sonuçlar, markalar arasında belirgin fiyat farklılıkları olduğunu göstermektedir. **Lüks segmentteki markalar** ortalama fiyatları en yüksek olan grubu oluşturmaktadır. Bu markaların ikinci el araçlarının ortalama fiyatları milyon TL seviyelerine yaklaşabilmekte ya da bu eşiği aşabilmektedir. **Ekonomi segmentindeki markalar** ise çok daha düşük ortalama fiyatlara sahiptir. Örneğin, Tofaş markalı eski model araçların ilanları genellikle ortalama birkaç yüz bin TL’nin altında seyrederken, Mercedes gibi markaların ikinci el piyasadaki ortalamaları bunların katbekat üzerindedir.

Marka bazlı fiyat dağılım grafikleri, bazı markaların fiyat dağılımının da geniş olduğunu göstermektedir. Özellikle hem düşük sınıf hem de üst sınıf modeller üreten markalarda ikinci el fiyatlarında geniş bir yayılım görülür. Bu durum, aynı markanın farklı modelleri arasındaki fiyat uçurumundan kaynaklanmaktadır. Buna karşılık, ultra lüks markaların ikinci el ilanları az sayıda olsa da ortalama olarak en yüksek fiyatlara sahip olup dağılımları nispeten homojendir. Genel olarak, **marka** faktörünün ikinci el araç değerlemesinde son derece belirleyici olduğu teyit edilmiştir. Tüketiciler, iyi bilinen ve prestijli markalara ikinci el olsa dahi yüksek bedeller ödemeye razı olabilmektedirler. Bu bulgu, marka algısının fiyat üzerindeki etkisine dair literatürdeki bilgilerle de uyumludur; marka değeri yüksek olan araçlar, ikinci el piyasasında da bu değeri paraya dönüştürebilmektedir.

### Vites Tipine Göre Fiyat

```{r, message=FALSE, warning= FALSE }
cars %>%
  filter(!is.na(transmission_type), !is.na(price_clean), price_clean > 0) %>%
  ggplot(aes(x = transmission_type, y = log10(price_clean))) +
  geom_boxplot(fill = "lightgreen", outlier.color = "darkred", outlier.size = 1.2) +
  labs(
    title = "Vites Tipine Göre Log10(Fiyat) Dağılımı",
    x = "Vites Tipi",
    y = "log10(Fiyat) (TL)"
  ) +
  theme_minimal()
```

Vites Tipine Göre Fiyat Dağılımı<br>

İkinci el araç ilanları, **vites tipine** göre temelde **manuel** ve **otomatik** olarak iki sınıfa ayrılabilir (bazı ilanlarda “yarı otomatik” ayrı bir kategori olarak belirtilse de yaygınlık manuel/otomatik kadar değildir). Analizler, otomatik vitesli araçların ikinci el fiyatlarının, benzer koşullardaki manuel vitesli araçlara kıyasla daha yüksek olduğunu göstermektedir. Örneğin, veriye göre otomatik vitesli araçların medyan fiyatı, manuel vitesli araçların medyan fiyatının belirgin biçimde üzerindedir. Farklı sınıf ve segmentlerde bu farkın büyüklüğü değişebilse de yönü tutarlıdır: aynı model ve benzer yaşta bir aracın otomatik versiyonu, manuel versiyonuna göre genellikle daha pahalıya satılmaktadır.

Bu durumun birden çok olası nedeni vardır. Öncelikle, otomatik vites genellikle daha yeni ve yüksek donanım seviyesine sahip araçlarda bulunmaktadır; dolayısıyla otomatik vitesli ikinci el araçlar ortalama olarak daha yeni modelleri temsil eder. İkincisi, özellikle büyük şehir trafiğinde otomatik vites kullanımının rahatlığı nedeniyle talep daha yüksektir. Artan talep, ikinci el piyasada otomatik araçların fiyatlarının yüksek kalmasına katkıda bulunur. Buna karşın manuel vitesli araçlar, Türkiye’de uzun yıllar standart olmakla birlikte, günümüzde daha çok ekonomik veya eski model araçlarda görüldüğü için fiyatları görece düşüktür. Analizde dikkat çeken bir diğer nokta, vites tipine bağlı fiyat farkının bazı markalarda daha belirgin olmasıdır. Lüks markaların hemen tüm araçları otomatik vitese sahipken, ekonomik markalarda manuel vitesli araç oranı daha yüksektir. Bu da veride gözlemlenen fiyat farkını kısmen açıklamaktadır: lüks markalar (zaten pahalı olan) otomatik araçlar üretirken, manuel vitesli araçlar çoğunlukla düşük fiyat segmentinde kalmaktadır. Sonuç olarak, **vites tipi** başlı başına fiyatı belirleyen bir özellik olmayıp, diğer özelliklerle (model, donanım, segment) etkileşimli biçimde etkisini göstermektedir. Yine de, ortalama olarak **otomatik vitesli araçlar ikinci elde daha yüksek fiyatla listelenmektedir**, bu da piyasanın teknoloji ve konfor için ek bir bedel ödemeye istekli olduğunu göstermektedir.

```{r, message=FALSE, warning=FALSE}

library(ggplot2)
library(scales)
library(forcats)
library(RColorBrewer)

# Önce city_stats oluştur
city_stats <- cars %>%
  filter(!is.na(city), !is.na(price_clean)) %>%
  group_by(city) %>%
  summarise(
    mean_price = mean(price_clean, na.rm = TRUE),
    count = n()
  )

# Şehir bazlı ilk 15 şehri alalım (çok kalabalık olmasın)
city_top <- city_stats %>%
  filter(count >= 40) %>%
  top_n(15, mean_price)

city_colors <- RColorBrewer::brewer.pal(n = 9, name = "YlGnBu")

ggplot(city_top, aes(x = fct_reorder(city, mean_price), y = mean_price, fill = city)) +
  geom_col(width = 0.7, color = "white", show.legend = FALSE) +
  geom_text(
    aes(label = paste0(format(round(mean_price, 0), big.mark = "."), " TL")),
    hjust = 1.1, color = "white", size = 3.5
  ) +
  coord_flip() +
  scale_fill_manual(values = colorRampPalette(city_colors)(length(unique(city_top$city)))) +
  scale_y_continuous(
    limits = c(0, NA),
    labels = label_number(suffix = " TL", big.mark = ".", decimal.mark = ","),
    expand = expansion(mult = c(0, 0.05))
  ) +
  labs(
    title = "Ortalama Fiyatı En Yüksek Şehirler (İlk 15 - Min. 30 İlan)",
    x = "Şehir",
    y = "Ortalama Fiyat"
  ) +
  theme_minimal(base_size = 13) +
  theme(
    plot.title = element_text(face = "bold", size = 14),
    axis.text.y = element_text(face = "bold"),
    panel.grid.major.y = element_blank()
  )


```

```{r, message=FALSE, warning=FALSE}

library(ggplot2)
library(scales)
library(forcats)
library(dplyr)
library(tidyr)
library(RColorBrewer)

# Ortalama ve medyan fiyatları hesapla (ilk 12 şehir)
fiyat_ozet <- cars %>%
  filter(!is.na(city), !is.na(price_clean)) %>%
  group_by(city) %>%
  filter(n() >= 40) %>%
  summarise(
    Ortalama = mean(price_clean, na.rm = TRUE),
    Medyan = median(price_clean, na.rm = TRUE),
    count = n()
  ) %>%
  arrange(desc(Ortalama)) %>%
  head(12) %>%
  pivot_longer(cols = c("Ortalama", "Medyan"), names_to = "FiyatTürü", values_to = "Fiyat") %>%
  mutate(city = fct_reorder(city, Fiyat))

# Grafik

gradient_colors <- colorRampPalette(c("#f9c5d1", "#de7fa3", "#7b2c5c"))(2)

# Grafik
ggplot(fiyat_ozet, aes(x = city, y = Fiyat, fill = FiyatTürü)) +
  geom_col(position = position_dodge(width = 0.7), width = 0.6) +
  geom_text(
    aes(label = paste0(format(round(Fiyat, 0), big.mark = "."), " TL")),
    position = position_dodge(width = 0.7),
    hjust = 1.05, size = 3.2, color = "white"
  ) +
  coord_flip() +
  scale_fill_manual(
    values = setNames(gradient_colors, c("Ortalama", "Medyan"))
  ) +
  scale_y_continuous(
    limits = c(0, NA),
    labels = label_number(suffix = " TL", big.mark = ".", decimal.mark = ","),
    expand = expansion(mult = c(0, 0.05))
  ) +
  labs(
    title = "İlk 12 Şehirde Ortalama ve Medyan Fiyat Karşılaştırması",
    x = "Şehir",
    y = "Fiyat (TL)",
    fill = "Fiyat Türü"
  ) +
  theme_minimal(base_size = 13) +
  theme(
    plot.title = element_text(face = "bold", size = 14, color = "#581845"),
    axis.text.y = element_text(face = "bold"),
    legend.position = "bottom"
  )

```

Türkiye genelinde medyan fiyat açısından Muğla, yaklaşık 780 000 TL ile birinci sırada yer alırken, İstanbul 770 000 TL civarıyla ikinci ve Batman 760 000 TL dolaylarıyla üçüncü konumda bulunuyor. Ortalama fiyatlarda ise İstanbul, yaklaşık 1 150 000 TL ile açık ara liderliğini koruyor; Muğla (≈ 950 000 TL) ve Antalya (≈ 900 000 TL) ise İstanbul’u izliyor. Bu durum, pazardaki yüksek fiyatlı ilanların ortalamayı ciddi biçimde yukarı çektiğini gösteriyor.

Turistik destinasyonlar başta olmak üzere Muğla ve Antalya’da hem medyan hem de ortalama fiyatların görece yüksek olması, Bodrum, Fethiye ve Marmaris gibi ilçelere yönelik güçlü talebin ve bölge ekonomisinin ikinci el piyasasını üst segmente doğru kaydırdığını ortaya koyuyor. İstanbul ise büyük metropol olmanın getirdiği nüfus yoğunluğu, iş imkânları ve lüks araç arz-talep dengesiyle ortalama fiyat bakımından zirvede yer alıyor.

Ortalama ve medyan arasındaki farkın İstanbul’da yaklaşık 380 000 TL, Muğla’da ise 170 000 TL civarında seyretmesi, bu illerdeki pahalı ilan hacminin fazlalığına işaret ediyor. Yani yüksek gelir grubuna mensup alıcılar bu piyasalarda belirgin ağırlıkta.

Medyanı 600–700 000 TL arasında değişen Konya, Mersin, Adana ve Sakarya gibi iller geniş bir kitleye hitap ederken, fiyatların ne aşırı oynak ne de tamamen durağan olduğu dengeli bir pazar yapısı sunuyor. Öte yandan Kahramanmaraş, Zonguldak, Yozgat, Sivas ve Çorum’da hem medyan hem de ortalama fiyatlar 500 000 TL’nin altında seyrediyor. Uç fiyat ilanlarının nispeten sınırlı kaldığı bu bölgeler daha “ölçülü” bir piyasa yapısına sahip.

Genel olarak, medyan fiyatın yüksek olduğu bir ilde tipik bir satışın bile ülke ortalamasının üstünde gerçekleştiği; düşük medyanlı bölgelerde ise çoğu ilanın makul sınırlarda seyrettiği söylenebilir.

Yatırım ya da satın alma stratejisi belirlenirken, uç fiyatların yanıltıcı etkisinden kaçınmak için ortalama yerine medyan değere odaklanmak daha gerçekçi bir bakış açısı sağlayacaktır. Ayrıca, medyan değeri yüksek ancak ortalama ile arasındaki makasın görece dar olduğu Batman veya Diyarbakır gibi iller, lüks segmente kapı aralarken aşırı fiyat dalgalanmalarından da uzak kalmak isteyen alıcılar için cazip seçenekler sunabilir.

### Türkiye’deki illerin ortalama ikinci el araç fiyatlarının harita üzerinde gösterimi

```{r, message=FALSE, warning=FALSE}

# Türkiye shapefile'ını oku
turkiye_il <- st_read("csv/tr_shp/tr.shp", quiet = TRUE)

# Türkçe karakterleri düzleştiren yardımcı fonksiyon
normalize_city <- function(x) {
  x %>%
    stri_trans_general("Latin-ASCII") %>% # Türkçe karakterleri dönüştür (İ→I, Ş→S, Ü→U)
    toupper() %>%
    trimws()
}

# Ortalama fiyatları hesapla (ilan sayısı 30'dan büyük olanlar)
fiyatlar <- cars %>%
  filter(!is.na(city), !is.na(price_clean)) %>%
  group_by(city) %>%
  summarise(
    mean_price = mean(price_clean, na.rm = TRUE),
    ilan_sayisi = n()
  ) %>%
  filter(ilan_sayisi >= 30) %>%
  mutate(city_clean = normalize_city(city))

# Harita verisini temizle
turkiye_il <- turkiye_il %>%
  mutate(city_clean = normalize_city(name))  # name yerine IL_ADI kullanıyorsan onu yaz

# Join işlemi
turkiye_il <- turkiye_il %>%
  left_join(fiyatlar, by = "city_clean")

# Harita paleti
pal <- colorNumeric(palette = "YlOrRd", domain = turkiye_il$mean_price, na.color = "gray90")

# Harita çizimi
leaflet(data = turkiye_il) %>%
  addTiles() %>%
  addPolygons(
    fillColor = ~pal(mean_price),
    weight = 1,
    opacity = 1,
    color = "white",
    dashArray = "3",
    fillOpacity = 0.7,
    label = ~paste0(name, ": ₺", format(round(mean_price), big.mark = ".", decimal.mark = ",")),
    highlightOptions = highlightOptions(
      weight = 3,
      color = "#666",
      fillOpacity = 0.9,
      bringToFront = TRUE
    )
  ) %>%
  addLegend(pal = pal, values = ~mean_price, opacity = 0.7,
            title = "Ortalama Fiyat (₺)",
            position = "bottomright")

```

### Yakıt Tipine Göre Medyan Araç Fiyatları

```{r, message=FALSE, warning=FALSE}
library(ggplot2)
library(dplyr)
library(scales)

# Grafik verisi
fuel_prices <- cars %>%
  group_by(fuel_type) %>%
  summarise(median_price = median(price_clean, na.rm = TRUE)) %>%
  arrange(median_price)

# Grafik
ggplot(fuel_prices, aes(x = reorder(fuel_type, median_price), y = median_price, fill = fuel_type)) +
  geom_col(width = 0.65, show.legend = FALSE) +
  geom_text(
    aes(label = paste0(format(round(median_price), big.mark = "."), " TL")),
    hjust = -0.1, size = 3.5, color = "black"
  ) +
  scale_fill_brewer(palette = "Set2") +  # Şık, pastel renk geçişleri
  coord_flip() +
  scale_y_continuous(
    limits = c(0, NA),
    labels = label_number(suffix = " TL", big.mark = ".", decimal.mark = ","),
    expand = expansion(mult = c(0, 0.2))
  ) +
  labs(
    title = "Yakıt Tipine Göre Medyan Araç Fiyatları",
    x = "Yakıt Türü",
    y = "Medyan Fiyat (TL)"
  ) +
  theme_minimal(base_size = 13) +
  theme(
    plot.title = element_text(face = "bold", size = 14, color = "#374151"),
    axis.text.y = element_text(face = "bold"),
    panel.grid.major.y = element_blank()
  )

```

Yakıt tipi, bir aracın kullanım maliyetini ve teknolojisini belirleyen önemli bir özelliktir ve ikinci el piyasa değerine de yansımaktadır. Veri setimizde araçlar **Benzin**, **Dizel**, **LPG** (sadece LPG ya da LPG & Benzin) ve **Hibrit/Elektrik** yakıt seçeneklerine sahiptir. Yaptığımız analiz, yakıt tipine göre medyan fiyatlarda belirgin farklar olduğunu ortaya koymuştur. En yüksek medyan fiyata sahip grup, beklendiği üzere **elektrikli araçlar** olmuştur: Elektrikli araçların ortalama ikinci el fiyatı yaklaşık 4.19 milyon TL ile diğer tüm grupları açık ara geride bırakmaktadır. Bunu, nispeten yeni teknolojiye sahip **hibrit araçlar** takip etmektedir; hibrit araçların medyan fiyatı yaklaşık 1.27 milyon TL civarındadır. **Benzinli** araçlar için medyan fiyat yaklaşık 825 bin TL olarak bulunurken, **dizel** araçların medyanı yaklaşık 610 bin TL ile biraz daha düşük çıkmıştır. En düşük medyan fiyat ise **LPG’li** (ya da LPG dönüşümü yapılmış) araçlardadır; bu grupta medyan fiyat yaklaşık olarak 360 bin TL seviyesindedir.

Bu bulgular, farklı yakıt türlerinin ikinci el piyasada farklı segmentlere karşılık geldiğini göstermektedir. **Elektrikli araçlar**, genellikle premium fiyatlı yeni teknoloji araçlar olduğundan ikinci elde de yüksek fiyatlanmaktadır. **Hibritler** de benzer şekilde yeni ve pahalı araçlardır. **Benzinli** ve **Dizel** araçlar ise çok daha geniş bir yelpazeye yayılmıştır; ekonomik küçük arabalardan lüks segment araçlara kadar benzinli/dizel birçok model bulunduğundan, medyan değerleri orta sıralarda yer almaktadır. Dizel araçların medyanının benzinli araçlardan düşük çıkması, dizel araçların genelde yüksek kilometre yapmış veya ticari amaçla kullanılmış olmasıyla ilişkilendirilebilir. Oysa 2000’lerde yapılan bir çalışmada, dizel motorun ikinci el fiyatı artıran bir unsur olduğu belirtilmiştir \[8\]. Erdem ve Şentürk (2009) o dönemde dizel motorlu olmanın fiyatı pozitif etkilediğini bulmuşlardır; muhtemelen yakıt ekonomisi nedeniyle dizel araçlara talep güçlüydü.\
2025’e gelindiğinde ise benzinli motorlar teknolojik olarak verimli hale gelmiş, dizel motorlar emisyon regülasyonlarıyla pazar payı kaybetmeye başlamıştır. Bu değişim, dizel araçların ikinci el değerine de yansımış olabilir. Yine de, yakıt tipi genel olarak fiyatı etkileyen önemli bir faktördür ve farklı yakıt türleri arasında ciddi fiyat medyan farkları oluşmaktadır.\
\
\[8\] Erdem, C., & Şentürk, İ. (2009). *A hedonic analysis of used car prices in Turkey*. *International Journal of Economic Perspectives, 3*(2), 141–149.

## Trend Analizi

### Araç Yaşı ile Fiyat İlişkisi

```{r,message= FALSE, warning= FALSE }
# Bilimsel gösterimi kapat
options(scipen = 999)


library(ggplot2)
library(scales)
library(dplyr)

# Outlier'ları filtrele
q_low <- quantile(cars$mileage_clean, 0.01, na.rm = TRUE)
q_high <- quantile(cars$mileage_clean, 0.99, na.rm = TRUE)

cars_filtered <- cars %>%
  filter(
    mileage_clean >= q_low,
    mileage_clean <= q_high,
    price_clean <= quantile(price_clean, 0.99, na.rm = TRUE)
  )

# Grafik çizimi
ggplot(cars_filtered, aes(x = mileage_clean, y = price_clean)) +

  geom_point(
    aes(color = price_clean),
    alpha = 0.7,
    size = 2.2
  ) +

  geom_smooth(
    method = "lm",
    se = FALSE,
    color = "#9c0d38",
    linewidth = 1.5
  ) +

  scale_color_gradientn(
    colours = c("#ffdde1", "#faa2c1", "#f75c88", "#c9184a"),
    name = "Fiyat (TL)"
  ) +
  scale_y_continuous(
    labels = label_number(big.mark = ".", decimal.mark = ",", suffix = " TL")
  ) +
  scale_x_continuous(
    labels = label_number(big.mark = ".", decimal.mark = ",", suffix = " km")
  ) +
  labs(
    title = "Kilometre ile Fiyat Arasındaki İlişki",
    x = "Kilometre",
    y = "Fiyat (TL)"
  ) +
  theme_minimal(base_size = 13) +
  theme(
    plot.title = element_text(face = "bold", size = 14, color = "#9c0d38"),
    axis.text = element_text(face = "bold"),
    legend.position = "right",
    panel.grid.minor = element_blank()
  )


```

Negatif Korelasyon (Eğim Azalan):

Siyah çizgi (regresyon doğrusu), kilometre arttıkça araç fiyatının azaldığını gösteriyor.

Bu beklenen bir sonuç: Daha fazla kullanılmış (yüksek km’li) araçlar genellikle daha ucuz.

Veri Dağılımı:

0–50.000 km arası araçlar daha yüksek fiyatlara sahip. Fiyat 3.000.000 TL'ye kadar çıkabiliyor.

150.000 km’den sonra fiyatlar genellikle 1.000.000 TL'nin altına düşüyor.

Yoğunluk:

En yoğun noktalar (mor kümeler) 50.000 – 150.000 km arası ve 500.000 – 1.500.000 TL fiyat aralığında toplanıyor.

Bu da piyasadaki en yaygın ikinci el araç kitlesini gösteriyor.

Aykırı Değerlerin Etkisi Azalmış:

İlk grafiğe göre çok uç fiyatlar (\>30.000.000 TL gibi) çıkarıldığı için regresyon çizgisi daha gerçekçi bir eğilim gösteriyor.

Kilometre arttıkça araç fiyatı genellikle düşmektedir. Özellikle 150.000 km üzerindeki araçlar belirgin şekilde daha ucuzdur. Ancak düşük kilometreli araçların fiyatları çok değişken olup bazı modellerde yüksek fiyatlara ulaşabilmektedir.

### Araç Yaşı ve Ortalama Fiyat

```{r, message=FALSE, warning=FALSE }
# Bilimsel gösterimi tamamen kapat
options(scipen = 999)

library(ggplot2)
library(dplyr)
library(scales)

# Yaşa göre ortalama fiyat
yas_fiyat <- cars %>%
  group_by(age) %>%
  summarise(mean_price = mean(price_clean, na.rm = TRUE))

# Grafik
ggplot(yas_fiyat, aes(x = age, y = mean_price)) +
  geom_line(color = "#d11141", size = 1.3) +             # Çizgi rengi
  geom_point(color = "#333333", size = 2.5) +            # Nokta rengi
  scale_x_continuous(breaks = pretty(yas_fiyat$age)) +
  scale_y_continuous(
    labels = label_number(big.mark = ".", decimal.mark = ",", suffix = " TL")  # 1.250.000 TL
  ) +
  labs(
    title = "Araç Yaşına Göre Ortalama Fiyat",
    x = "Araç Yaşı",
    y = "Ortalama Fiyat (TL)"
  ) +
  theme_minimal(base_size = 13) +
  theme(
    plot.title = element_text(face = "bold", size = 14, color = "#d11141"),
    axis.text = element_text(face = "bold")
  )


```

Genel Eğilim (Azalan Trend):

Grafik kırmızı bir çizgiyle, araç yaşı arttıkça ortalama fiyatın düştüğünü net şekilde gösteriyor.

İkinci el araç fiyatlarını belirleyen en önemli unsurlardan biri araçların model yılı, yani yaşlarıdır. Genel kural olarak, bir araç trafiğe çıktığı andan itibaren her yıl değer kaybeder (*depreciation*). Literatürde yeni bir otomobilin ilk yılında değerinin %15-30’unu, sonraki her yıl ise ortalama %10-15’ini kaybettiği sıkça belirtilir \[9\]. Bizim veri setimiz de bu eğilimi doğrular niteliktedir. Model yılı arttıkça (araç daha yeni oldukça) ikinci el fiyatın belirgin biçimde yükseldiği görülmüştür. Örneğin 2022, 2023 ve 2024 model araçların medyan fiyatları 1 milyon TL’nin üzerinde seyretmekteyken, 2010’lu yılların başına ait araçların medyanları bunun çok altındadır. Hatta 1990’lı, 2000’li yıllara ait eski araçlar için ikinci el fiyatları yüz bin TL mertebelerine kadar düşebilmektedir. Analizimizde aracın **model yılı** ile ikinci el fiyatı arasında pozitif yönlü orta kuvvette bir korelasyon saptanmıştır (Pearson korelasyonu ≈ 0.39). Bu, daha yeni araçların daha pahalı olduğunu sayısal olarak da teyit etmektedir. Bununla birlikte, her model yılı için fiyat dağılımının geniş bir aralıkta olabileceği unutulmamalıdır; zira marka ve donanım farklılıkları, iki aynı model yılındaki araç arasında bile ciddi fiyat farklarına yol açabilir. Örneğin 2015 model bir lüks araç, 2020 model bir ekonomik araçtan pahalı olabilir. Dolayısıyla yaş tek başına değil, diğer özelliklerle birlikte değerlendirilmelidir. Yine de, genel trend olarak **“araç yaşlandıkça ucuzlar”** prensibi verimizde açıkça görülmüştür. Bu da beklentilerle uyumludur ve hedonik model perspektifinden bakıldığında, üretim yılı fiyatı belirleyen en temel niteliklerden biridir \[10\].

\[9\] Bankrate. (n.d.). *Car depreciation: What it is and how it works*. Bankrate. Erişim tarihi 11 Mayıs 2025, <https://www.bankrate.com/insurance/car/understanding-car-depreciation/>

\[10\] Özçalıcı, M. (2017). Predicting second-hand car sales price using decision trees and genetic algorithms. *Alphanumeric Journal, 5*(1), 103–114. <https://doi.org/10.17093/alphanumeric.323836>

## Model Uydurma

## Modelin Performansı

### Model için Veri Setinin Hazırlanması

```{r}
# Temizlenmiş veri üzerinden model veri seti oluşturuluyor

car_data <- cars %>%
  filter(
    !is.na(price_clean),
    !is.na(year_clean),
    !is.na(mileage_clean),
    !is.na(engine_power_clean),
    !is.na(fuel_type),
    !is.na(transmission_type),
    !is.na(brand),
    !is.na(body_type)
  ) %>%
  mutate(
    price_log = log10(price_clean),  # log dönüşümü ile daha iyi dağılım
    across(c(fuel_type, transmission_type, brand, body_type), as.factor)
  ) %>%
  select(price_log, year_clean, mileage_clean, engine_power_clean, fuel_type, transmission_type, brand, body_type)

# car_data'nın ilk 10 satırını tablo olarak bastır
knitr::kable(head(car_data, 10), caption = "Modelleme için Hazırlanan Veri Setinin İlk 10 Satırı")

```

### Modelin Eğitilmesi ve Test Edilmesi

```{r message=FALSE, warning=FALSE}
set.seed(123)

split <- createDataPartition(car_data$price_log, p = 0.8, list = FALSE)
train_set <- car_data[split, ]
test_set <- car_data[-split, ]

rf_model <- randomForest(
  price_log ~ ., 
  data = train_set,
  ntree = 100,
  importance = TRUE
)

# Tahmin yap
predicted <- predict(rf_model, newdata = test_set)
actual <- test_set$price_log

# Performans metrikleri (log10 dönüşümlü)
rmse <- sqrt(mean((predicted - actual)^2))
mae <- mean(abs(predicted - actual))

cat("RMSE (log10):", round(rmse, 3), "\n")
cat("MAE (log10):", round(mae, 3), "\n")

# Gerçek ölçekte hata tahmini (yüzdelik)
relative_error <- (10^rmse - 1) * 100
cat("Tahmini Ortalama Hata (%):", round(relative_error, 1), "%")


```

### Tahmin Doğruluğu ve Yorum

-RMSE (log10): 0.071

-MAE (log10): 0.051

-Tahmini Ortalama Hata (%): \~17.8%

Bu sonuçlar, modelin ikinci el araç fiyatlarını oldukça başarılı şekilde tahmin ettiğini göstermektedir. Özellikle ikinci el araç piyasasındaki dalgalanma, marka ve model çeşitliliği göz önüne alındığında, bu hata oranı güçlü bir performansa işaret eder.

Model, fiyatların %80’inden fazlasını gerçek değerin ±%18’lik bir aralığında öngörebilmiştir.

### Önemli Değişkenler

```{r }
vip(rf_model, num_features = 10)

```

### Gerçek Fiyat ile Tahmin Edilen Fiyat Karşılaştırması

```{r, message=FALSE, warning=FALSE}
# Test veri seti üzerinde tahmin yap ve hata metriklerini hesapla
tahmin_df <- test_set %>%
  mutate(
    tahmin_log = predict(rf_model, newdata = .),            # Log10 tahmini
    tahmin_fiyat = 10^tahmin_log,                           # Gerçek ölçekli tahmin
    gercek_fiyat = 10^price_log,                            # Gerçek fiyat (log'dan çıkarıldı)
    hata = abs(tahmin_fiyat - gercek_fiyat),                # Mutlak hata
    hata_orani = round((hata / gercek_fiyat) * 100, 1)      # Yüzde hata
  ) %>%
  select(brand, year_clean, mileage_clean, engine_power_clean,
         fuel_type, transmission_type, body_type,
         gercek_fiyat, tahmin_fiyat, hata, hata_orani)

# En başarılı tahmin edilen 10 örneği görüntüle
  knitr::kable(head(tahmin_df %>% arrange(hata_orani), 10), caption = "En Düşük Hatalı 10 Fiyat Tahmini")


```

### En Çok Fahiş Fiyatlı İlan Bulunan Markalar ve Fahiş İlanlarda Hata Oranı Dağılımı Analizi

```{r, message=FALSE, warning=FALSE}
library(dplyr)
library(ggplot2)
library(viridis)

# tahmin_df ve test_set için ID ekleme
tahmin_df <- tahmin_df %>%
  mutate(id = row_number())

test_set <- test_set %>%
  mutate(id = row_number())

# Fahiş fiyatlı ilanları belirle (hata oranı > %30)
fahis_df <- tahmin_df %>%
  filter(hata_orani > 30) %>%
  select(id, hata_orani)

# Fahiş ilanların orijinal bilgilerini test_set ile birleştir
fahis_detayli <- test_set %>%
  inner_join(fahis_df, by = "id")

# cars datasından seller_type ve city gibi bilgileri ekleyelim
ilan_fahis_detay <- fahis_detayli %>%
  left_join(cars %>%
              mutate(price_log = log10(price_clean)) %>%
              select(price_log, brand, model, year_clean, mileage_clean, engine_power_clean, city, seller_type),
            by = c("price_log", "brand"))

# Marka bazlı en çok fahiş ilan (Top 10 marka)
marka_fahis <- ilan_fahis_detay %>%
  count(brand, sort = TRUE) %>%
  top_n(10, wt = n)

# Satıcı türüne göre fahiş ilan dağılımı
satici_fahis <- ilan_fahis_detay %>%
  count(seller_type, sort = TRUE)

# Şehir bazında fahiş ilan dağılımı
sehir_fahis <- ilan_fahis_detay %>%
  count(city, sort = TRUE) %>%
  top_n(10, wt = n)

ggplot(marka_fahis, aes(x = reorder(brand, n), y = n, fill = n)) +
  geom_col(width = 0.7) +
  geom_text(aes(label = n), hjust = -0.3, size = 4, fontface = "bold", color = "black") +
  coord_flip() +
  scale_fill_viridis_c(option = "D", direction = -1) +
  labs(
    title = "En Çok Fahiş Fiyatlı İlan Bulunan Markalar",
    x = "Marka",
    y = "Fahiş İlan Sayısı"
  ) +
  scale_y_continuous(expand = expansion(mult = c(0, 0.2))) +
  theme_minimal(base_size = 13) +
  theme(
    plot.title = element_text(face = "bold", size = 15, color = "#2b2b2b"),
    axis.text = element_text(face = "bold"),
    legend.position = "none"
  )

```

En Çok Fahiş Fiyatlı İlan Bulunan Markalar grafiği, ikinci el araç piyasasında tahmin edilen piyasa değerine kıyasla %30’dan fazla sapma gösteren (yani fahiş fiyatlı olarak nitelendirilebilecek) ilanların, marka bazında dağılımını göstermektedir.

Analiz sonucuna göre, Renault markası en fazla fahiş fiyatlı ilanla ilk sırada yer almakta, onu Fiat ve Opel markaları takip etmektedir. Bu durum, söz konusu markaların Türkiye genelinde yaygın olarak tercih edilmesi ve ikinci el piyasasında yüksek ilan hacmine sahip olmalarıyla ilişkilendirilebilir. Ayrıca, bazı kullanıcıların bu markalara yönelik talep avantajını fırsata çevirmeye çalışarak, piyasa değerinin üzerinde fiyatlandırmalar yaptığı değerlendirilmektedir.

Peugeot, Hyundai ve BMW gibi diğer markalar da fahiş fiyatlı ilanlar açısından dikkat çekmekle birlikte, premium segmentte yer alan Mercedes-Benz ve Audi gibi markalar, daha düşük sayıda fahiş fiyatlı ilanla listenin son sıralarında yer almıştır. Bu durum, yüksek segment araçlarda fiyat algısının daha dengeli oluştuğunu ve piyasa değerinden sapmaların nispeten daha az yaşandığını göstermektedir.

Sonuç olarak, elde edilen bulgular, ikinci el araç piyasasında bazı markalarda piyasa değerinin üzerinde fiyatlandırmaların yoğunlaştığını ortaya koymakta ve bu durumun marka bazında farklılık gösterdiğine işaret etmektedir.

```{r, message=FALSE, warning=FALSE}
ggplot(ilan_fahis_detay, aes(x = hata_orani)) +
  geom_histogram(fill = "#ff6f61", bins = 30, color = "white") +
  labs(
    title = "Fahiş Fiyatlı İlanlarda Hata Oranı Dağılımı",
    x = "Tahmin Hatası (%)",
    y = "İlan Sayısı"
  ) +
  theme_minimal(base_size = 13) +
  theme(
    plot.title = element_text(face = "bold", size = 15, color = "#2b2b2b"),
    axis.text = element_text(face = "bold")
  )

```

Fahiş İlanlarda Hata Oranı Dağılımı

%30–50 aralığında hata oranına sahip ilanlar en yoğun grubu oluşturmaktadır. Bu durum, piyasadaki fahiş fiyatlı ilanların büyük çoğunluğunun, piyasa değerine kıyasla %30 ila %50 daha yüksek fiyatlandırıldığını göstermektedir.

Özellikle %35 civarındaki hata oranı, en fazla ilan sayısının gözlendiği bölgeyi temsil etmektedir.

%70 ve üzeri hata oranına sahip ilanlar, çok daha düşük sıklıkta görülmekte olup uç değerleri temsil etmektedir.

%100’ün üzerinde hata oranına sahip az sayıda ilan bulunması, bazı ilanların gerçek piyasa değerinin iki katına varan fiyatlarla listelendiğini ortaya koymaktadır.

### Satıcı Türüne Göre Fahiş Fiyat Eğilimi

```{r, message=FALSE, warning=FALSE}

library(ggplot2)
library(dplyr)
library(scales)
library(tidyr)

# Her satıcı tipi için fahiş ilan sayısı
fahis_oran_df <- ilan_fahis_detay %>%
  count(seller_type, name = "fahis") %>%
  right_join(
    cars %>% count(seller_type, name = "toplam"),
    by = "seller_type"
  ) %>%
  replace_na(list(fahis = 0)) %>%
  mutate(
    oran = round((fahis / toplam) * 100, 1),                     # Oranı hesapla
    label = paste0(seller_type, ": ", oran, "%")                 # Etiket oluştur
  ) %>%
  filter(!is.na(seller_type) & oran > 0)                         # Yalnızca oranı > 0 olanlar

# Donut grafik çizimi
ggplot(fahis_oran_df, aes(x = 2, y = oran, fill = seller_type)) +
  geom_col(width = 1, color = "white", size = 1.2) +
  coord_polar(theta = "y") +
  xlim(0.5, 2.5) +  # Donut efekti için
  geom_text(
    aes(label = label),
    position = position_stack(vjust = 0.5),
    size = 4.5,
    fontface = "bold",
    color = "black"
  ) +
  scale_fill_brewer(palette = "Set3") +
  labs(
    title = "Satıcı Tipine Göre Fahiş Fiyatlı İlan Oranı",
    fill = "Satıcı Tipi"
  ) +
  theme_void(base_size = 14) +
  theme(
    plot.title = element_text(face = "bold", size = 16, hjust = 0.5),
    legend.position = "none"
  )





```

Bu grafik, ikinci el araç ilanlarında **tahmin edilen piyasa değerine göre %30’dan fazla fiyat farkı** içeren ilanların satıcı türlerine göre dağılımını göstermektedir.

**En yüksek oran %21.3 ile Private Seller (Bireysel Satıcılar)** kategorisine aittir. Bu durum, bireysel satıcıların piyasa fiyatının üzerinde fiyat belirlemeye daha yatkın olduklarını göstermektedir. Muhtemelen piyasa bilgisine profesyonel satıcılar kadar hâkim olmamaları veya duygusal fiyatlandırma yapmaları bu sonucu doğurmuş olabilir.

**İkinci sırada %11.3 ile “Dealer” (Galerici)** tipi yer alır. Bu oran, galerilerin de belli ölçüde fahiş fiyatlı ilanlar yayınladığını ortaya koyar. Ancak yine de bireysel satıcılara kıyasla bu oran daha düşüktür.

**Authorized Dealer (Yetkili Satıcı)** ilanlarında fahiş fiyat oranı %0 çıkmıştır. Bu grup genellikle kurumsal yapıda olup fiyatlama stratejileri daha gerçekçi ve modele uygun olduğu için, tahmin edilen değerle yakınlık göstermektedir.

**Unknown** kategorisinde de oran sıfırdır; bu satıcı tipi çok az sayıda ilana sahiptir ya da veride eksik bilgi mevcuttur.

## Sonuçlar

# Sonuçlar ve Ana Çıkarımlar

Bu proje kapsamında gerçekleştirilen analizler, **Türkiye’deki ikinci el otomobil piyasasının** veriye dayalı kapsamlı bir fotoğrafını sunmuştur. Keşifsel veri analizi aşaması, **marka, yakıt türü, vites tipi, bölge** gibi etmenlerin ikinci el fiyatlar üzerinde belirgin etkileri olduğunu nicel bulgularla ortaya koymuştur. Örneğin, lüks segment bir markanın aracının, ekonomik segment bir aracın onlarca katına varan fiyatlara ulaşabildiği; otomatik vites, hibrit/elektrik gibi özelliklerin yüksek fiyat segmentinde yoğunlaştığı gösterilmiştir.

**Fiyat Belirleyicileri**: İkinci el araç fiyatlarını etkileyen başlıca unsurlar; araç markası, yaşı, motor gücü, kilometre bilgisi, yakıt ve vites tipi olarak belirlenmiştir. Bu değişkenlerin fiyat üzerindeki etkileri hem keşifsel analizlerle hem de regresyon modeli aracılığıyla doğrulanmıştır.

**Bölgesel Farklılıklar**: Türkiye genelinde iller arasında ikinci el araç fiyatlarında kayda değer farklılıklar gözlemlenmiştir. İstanbul, Muğla ve Antalya gibi illerde hem medyan hem de ortalama fiyatlar oldukça yüksek seviyelerde seyrederken; İç Anadolu ve Karadeniz’in bazı illerinde fiyatlar görece daha düşüktür. Turistik talep, demografik yapı ve alım gücü bu farklılıkları şekillendiren başlıca faktörlerdir.

**Fahiş Fiyatlı İlanlar**: Tahmin edilen piyasa değerinin %30 ve üzerinde fiyat farkı içeren ilanlar "fahiş fiyatlı" olarak değerlendirilmiş ve bu kapsama giren ilanların marka, satıcı türü ve şehir dağılımları incelenmiştir. Özellikle Renault, Fiat ve Opel gibi yaygın markalarda bu tür fiyatlamalara daha sık rastlanmıştır.

**Trend analizleri** ile yıllar içindeki fiyat değişimleri ve araç yaşının getirdiği değer kaybı somut şekilde görülmüş; bunun yanında Türkiye’ye özgü piyasa hareketleri (örneğin yüksek enflasyon döneminde ikinci el araçların değer kazanması) tespit edilmiştir. Tüm bu analizlerden elde edilen içgörüler bir araya getirildiğinde, ikinci el otomobil piyasasında fiyat dinamiklerinin büyük ölçüde rasyonel ve öngörülebilir faktörlere dayandığı sonucuna varılabilir.

**Satıcı Tipi Analizi**: Fahiş fiyatlı ilanların satıcı bazlı dağılımı incelendiğinde, bireysel (private) satıcıların bu kategoride en yüksek orana sahip olduğu tespit edilmiştir (%21,3). Yetkili satıcılarda (authorized dealer) ise fahiş fiyat oranı gözlemlenmemiştir. Bu durum, fiyatlandırma sürecinde kurumsal yapının disiplin ve piyasa bilgisine dayalı kararlar alma eğilimini yansıtmaktadır.

**Modelleme Performansı**: Random Forest algoritması kullanılarak geliştirilen fiyat tahmin modeli, test verisi üzerinde yaklaşık %17,8 oranında bir ortalama hata ile yüksek doğrulukta tahminler üretmiştir. Bu sonuç, ikinci el araç fiyatlarının öngörülebilir yapıda olduğunu ve veri madenciliği yöntemleriyle başarılı biçimde modellenebileceğini göstermektedir.

**Politika ve Uygulama Önerileri**: Elde edilen model, online ilan platformlarında dinamik fiyat öneri sistemleri geliştirmek ve kullanıcıları gerçekçi fiyatlandırma konusunda yönlendirmek amacıyla entegre edilebilir. Ayrıca tüketicilerin, özellikle fahiş fiyatlı ilanlardan korunması adına medyan ve tahmin değerlerine dayalı filtreleme sistemleri oluşturulabilir.

**Türkiye bağlamında**, elde edilen bulgular piyasanın mevcut durumunu anlamamıza yardımcı olmasının yanı sıra, son yıllardaki olağanüstü koşulların etkisini de vurgulamaktadır. Yüksek enflasyon ve kur dalgalanmaları gibi makro değişkenler, ikinci el otomobil fiyatlarını alışılmadık biçimde etkilemiştir. Bu çalışma, bu etkinin veriyle izlenebileceğini ve gerektiğinde model tahminlerine yedirilebileceğini göstermiştir. İleride benzer bir analiz, örneğin yıllık bazda tekrarlandığında, fiyat trendlerindeki değişimleri (enflasyonun durulması halinde ikinci el fiyatların normal amortisman eğrisine dönüp dönmediği gibi) ortaya koyabilecektir. Dolayısıyla, çalışmamız bir **temel hat** oluşturmakta; bundan sonra piyasada meydana gelebilecek değişimleri gözlemlemek için de bir referans noktası sağlamaktadır.

Sonuç olarak, **Türkiye’deki İkinci El Araç İlanları Üzerine Veri Analizi** başlıklı bu çalışma, hem kapsamlı bir keşifsel analiz hem de başarılı bir öngörü modeli ortaya koymuştur. Çalışma bulguları, ekonomik teori ile piyasa gerçeklerinin kesiştiği noktaları netleştirmektedir. Araç değerini belirleyen temel unsurlar, Türkiye piyasasının verileriyle doğrulanmış; ayrıca piyasaya özgü anomali ve eğilimler saptanmıştır. Elde edilen içgörüler, ikinci el araç alım-satımında daha şeffaf ve bilinçli kararlar alınmasına katkı sunabilir. Son olarak, bu projenin **Quarto ile tekrarlanabilir** bir rapor formatında sunulması, benzer verilerin güncellenerek analizlerin yinelenmesine imkân tanımaktadır. Bu da, gelecekte ortaya çıkabilecek yeni trendlerin ve değişimlerin kolaylıkla izlenebileceği anlamına gelir. Böylece, veri bilimi yöntemiyle sürekli güncellenen bir **ikinci el araç piyasa barometresi** oluşturmak mümkün olabilecektir

Not: Bu raporun hazırlanması sürecinde, metnin oluşturulmasında ve dil kontrolünde OpenAI tarafından geliştirilen ChatGPT aracından faydalanılmıştır. Üretilen içerik ekip üyelerince dikkatlice incelenmiş, gerekli düzeltmeler yapılmış ve akademik etik ilkelerine uygunluk sağlanmıştır. Bu yapay zekâ kullanımına dair şeffaflık, projenin etik duruşunun bir parçası olarak burada beyan edilmektedir.
